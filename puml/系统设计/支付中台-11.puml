@startuml 支付中台战略架构图

!theme plain
skinparam backgroundColor white
skinparam defaultFontSize 13
skinparam defaultFontName "Microsoft YaHei"

title <size:20><b>支付中台 - 战略架构</b></size>\n<size:14>支撑业务高速增长的核心支付平台</size>

' ========== 第一层：业务价值层 ==========
package "**业务价值层**" as BizValue #LightBlue {
  card "支付成功率提升\n<size:11>从92% → 98%</size>" as SuccessRate #90EE90
  card "支付成本降低\n<size:11>年节省500万</size>" as CostDown #90EE90
  card "用户体验优化\n<size:11>支付时长 < 3s</size>" as UX #90EE90
  card "风险损失控制\n<size:11>欺诈率 < 0.01%</size>" as RiskControl #90EE90
  card "业务敏捷支撑\n<size:11>新渠道接入 < 2天</size>" as Agility #90EE90
}

' ========== 第二层：核心能力层 ==========
package "**核心能力层**" as CoreCap #LightYellow {
  rectangle "**1. 全渠道支付**" as OmniPay #FFDAB9 {
    [微信支付] as WxPay
    [支付宝] as AliPay
    [银联] as UnionPay
    [数字人民币] as DCEP
  }

  rectangle "**2. 智能路由**" as SmartRoute #FFDAB9 {
    [成功率路由]
    [成本优化路由]
    [限额路由]
    [地域路由]
  }

  rectangle "**3. 全面风控**" as RiskMgmt #FFDAB9 {
    [事前预防]
    [事中监控]
    [事后审计]
  }

  rectangle "**4. 实时清算**" as Settlement #FFDAB9 {
    [对账引擎]
    [分账引擎]
    [结算引擎]
  }
}

' ========== 第三层：技术平台层 ==========
package "**技术平台层**" as TechPlatform #LightCyan {

  component "**支付核心平台**" as PayCore #87CEEB {
    [统一支付网关]
    [两层策略引擎]
    [支付编排服务]
    [幂等与重试]
  }

  component "**风控引擎**" as RiskEngine #87CEEB {
    [规则引擎]
    [机器学习模型]
    [实时决策引擎]
    [黑名单管理]
  }

  component "**渠道管理平台**" as ChannelMgmt #87CEEB {
    [渠道配置中心]
    [渠道健康检查]
    [智能切换引擎]
    [渠道限流熔断]
  }

  component "**数据中台**" as DataMiddle #87CEEB {
    [实时数据分析]
    [交易数据仓库]
    [BI报表]
    [监控大盘]
  }
}

' ========== 第四层：基础设施层 ==========
package "**基础设施层**" as Infrastructure #WhiteSmoke {
  database "配置中心\nNacos" as ConfigCenter
  database "消息队列\nKafka" as MQ
  database "缓存\nRedis" as Cache
  database "数据库\nMySQL" as DB
  cloud "云服务\nK8s+微服务" as Cloud
  frame "监控告警\nPrometheus+Grafana" as Monitor
}

' ========== 连接关系 ==========

' 业务价值 -> 核心能力
SuccessRate -down-> SmartRoute : 智能路由提升成功率
CostDown -down-> SmartRoute : 成本优化路由降本
UX -down-> OmniPay : 全渠道满足需求
RiskControl -down-> RiskMgmt : 风控防范损失
Agility -down-> ChannelMgmt : 灵活接入新渠道

' 核心能力 -> 技术平台
OmniPay -down-> PayCore
SmartRoute -down-> ChannelMgmt
RiskMgmt -down-> RiskEngine
Settlement -down-> DataMiddle

' 技术平台 -> 基础设施
PayCore -down-> DB
PayCore -down-> Cache
PayCore -down-> MQ
RiskEngine -down-> ConfigCenter
RiskEngine -down-> Cache
ChannelMgmt -down-> ConfigCenter
ChannelMgmt -down-> DB
DataMiddle -down-> DB
DataMiddle -down-> MQ

' 监控覆盖所有平台
Monitor .up.> PayCore
Monitor .up.> RiskEngine
Monitor .up.> ChannelMgmt
Monitor .up.> DataMiddle

' 云服务支撑所有平台
Cloud .up.> PayCore
Cloud .up.> RiskEngine
Cloud .up.> ChannelMgmt
Cloud .up.> DataMiddle

' ========== 关键指标 ==========
note right of BizValue
  <b>关键业务指标 (KPI)</b>
  ═══════════════════
  • 支付成功率: 98%+
  • 支付响应时间: < 3s
  • 系统可用性: 99.99%
  • 年交易额: 10亿+
  • 日峰值TPS: 5000+
  • 欺诈损失率: < 0.01%
end note

note left of Infrastructure
  <b>技术亮点</b>
  ═══════════════
  • 微服务架构 (Spring Cloud)
  • 两层策略模式 (渠道+支付方式)
  • 数据库配置化 (动态路由)
  • 分布式事务 (Seata)
  • 限流熔断 (Sentinel)
  • 灰度发布 (K8s)
end note

legend right
  <b>架构价值说明</b>
  ═══════════════════════════
  <b>1. 业务价值:</b> 直接支撑公司战略目标
  <b>2. 核心能力:</b> 差异化竞争优势
  <b>3. 技术平台:</b> 可复用的技术资产
  <b>4. 基础设施:</b> 稳定可靠的底座
  ═══════════════════════════
  <b>预期收益:</b>
  • 3年内支撑100亿GMV
  • 接入30+支付渠道
  • 服务10000+商户
endlegend

@enduml

